<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      crossorigin
      href="https://unpkg.com/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script
      crossorigin
      src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"
    ></script>
    <style>
      .pin-icon {
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid m-0 p-0" id="root"></div>
    <script type="text/javascript">
      const { createElement: c, useEffect, useState } = React;

      function StateListItem({ id, value }) {
        return c(
          "li",
          { className: "d-flex justify-content-between list-group-item" },
          c(
            "div",
            { className: "d-flex" },
            c("div", { className: "me-2 pin-icon" }, "âšª"),
            c("div", { className: "me-2" }, id),
          ),
          c("div", null, value),
        );
      }

      function StateList({ state }) {
        return c(
          "ul",
          { className: "list-group list-group-flush" },
          Object.entries(state)
            .sort()
            .map(([id, value]) => c(StateListItem, { id, value })),
        );
      }

      function App() {
        const [state, setState] = useState({});

        function getState() {
          fetch("/api/state/")
            .then((response) => response.json())
            .then((json) => setState(json));
        }

        useEffect(getState, []);

        return c(StateList, { state });
      }

      ReactDOM.render(c(App), document.getElementById("root"));
    </script>
  </body>
</html>
